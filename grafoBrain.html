<html>
    <h1>Grafos.js</h1>
    <p>Abra o console administrador para receber os resultados (F12)</p>
    <p>Em breve uma interface gráfica aqui</p>
</html>
<script type="text/javascript">

    //GRAFO
    // --GRAFO POSSUI UM CONJUNTO DE VÉRTICES E UM CONJUNTO DE LIGAÇÕES (ARESTAS OU ARCOS)
    // --GRAFO PODE SER PONDERADO E/OU DIRECIONADO
    function Grafo(_direcionado,_ponderado){
        this.vertices = new Array();
        this.ligacao = new Array();
        this.direcionado = _direcionado;
        this.ponderado = _ponderado;
    };

    // ADICIONA VERTICE PELO NOME
    // --INSERE O VERTICE NO CONJUNTO DE VERTICES
    // --CRIA NO CONJUNTO DE LIGAÇÃO UM ARRAY ONDE RECEBERÁ TODAS AS LIGAÇÕES DO VÉRTICE
    Grafo.prototype.addVertice = function (vertice){
        this.vertices.push(vertice);
        this.ligacao[vertice] = new Array();
    };

    //EXISTE VERTICE
    // --RECEBE O NOME DO VERTICE POR PARAMETRO, PROCURA NO OCNJUNTO DE VÉRTICES SE EXISTE
    Grafo.prototype.existeVertice = function (vertice) {
        for(i=0; i<this.vertices.length; i++){
            if(this.vertices[i] === vertice){
                console.log('Existe vértice!!!');
                return true;
            }
        }
        console.log('Vértice não encontrado');
        return false;
    };

    //ADICIONA ARCO NÃO PONDERADO
    //--RECEBE UM VERTICE DE ORIGEM, E UM VÉRTICE DE DESTINO
    //--ATRIBUI 1 AO PESO E CHAMA a função addArco() PONDERADO
    Grafo.prototype.addArco = function (vertice1,vertice2) {
        if(this.direcionado) {
            this.peso = 1;
            this.addArco(vertice1, vertice2, this.peso);
        }else{
            console.log('Impossível adicionar Arco em grafos não direcionados');
        }
    };

    //ADICIONA ARCO PONDERADO
    //--RECEBE O VERTICE DE ORIGEM, O VERTICE DE DESTINO E O PESO
    //--INSERE NO CONJUNTO DE LIGAÇÕES, NA POSIÇÃO DO VERTICE UM ARRAY COM O DESTINO E O PESO
    Grafo.prototype.addArco = function (vertice1,vertice2,_peso){
        if (this.direcionado) {
            this.ligacao[vertice1].push([vertice2, _peso]);
        } else {
            console.log('Impossível adicionar Arco em grafos não direcionados');
        }
    };

    //ADICIONA ARESTA NÃO PONDERADA
    //--RECEBE UM VERTICE DE ORIGEM, E UM VÉRTICE DE DESTINO
    //--ATRIBUI 1 AO PESO E CHAMA a função addAresta() PONDERADA
    Grafo.prototype.addAresta = function (vertice1,vertice2) {
        if(!this.direcionado) {
            this.peso = 1;
            this.addAresta(vertice1, vertice2, this.peso);
        }else{
            console.log('Impossível adicionar Aresta em grafos direcionados');
        }
    };

    //ADICIONA ARESTA PONDERADA
    //--RECEBE O VERTICE DE ORIGEM, O VERTICE DE DESTINO E O PESO
    //--INSERE NO CONJUNTO DE LIGAÇÕES, NA POSIÇÃO DO VERTICE DE ORIGEM UM ARRAY COM O DESTINO NA POSIÇÃO 0 E O PESO NA POSIÇÃO 1
    //--INSERE NO CONJUNTO DE LIGAÇÕES, NA POSIÇÃO DO VERTICE DE DESTINO UM ARRAY COM O ORIGEM NA POSIÇÃO 0 E O PESO NA POSIÇÃO 1
    Grafo.prototype.addAresta = function (vertice1,vertice2,_peso){
        if (!this.direcionado) {
            this.ligacao[vertice1].push([vertice2, _peso]);
            this.ligacao[vertice2].push([vertice1, _peso]);
        } else {
            console.log('Impossível adicionar Aresta em grafos direcionados');
        }
    };

    // EXISTE LIGAÇÃO
    //-- SE FOR DIRECIONADO - PROCURA SE EXISTE O VERTICE DESTINO NO CONJUNTO DE LIGAÇÕES DO VERTICE ORIGEM
    //-- SE NÃO FOR DIRECIONADO - PROCURA SE EXISTE O VERTICE DESTINO NO CONJUNTO DE LIGAÇÕES DO VERTICE ORIGEM E
    //                            E SE  EXISTE O VERTICE ORIGEM NO CONJUNTO DE LIGAÇÕES DO VERTICE DESTINO
    Grafo.prototype.existeLigacao = function (origem,destino) {
      if(this.direcionado){
          for(i =0; i<this.ligacao[origem].length; i++ ) {
              if (this.ligacao[origem][i][0] === destino) {
                  console.log('Existe Arco!!!');
                  return true;
              }
          }
          console.log('Arco não encontrado!!!');
          return false;
      }else{
          for(i =0; i<this.ligacao[origem].length; i++ ) {
              if (this.ligacao[origem][i][0] === destino) {
                  for(j =0; j<this.ligacao[destino].length; j++){
                      if(this.ligacao[destino][j][0] === origem){
                          console.log('Existe Aresta!!!');
                          return true;
                      }
                  }
              }
          }
          console.log('Aresta não encontrada!!!');
          return false;
      }
    };

    // RETORNAR LIGAÇÕES
    // --RETORNA A LISTA DE TODAS AS LIGAÇÕES DE UM VERTICE
    Grafo.prototype.retornarLigacoes = function (vertice) {
        console.log(this.ligacao[vertice]);
    };

    // DESENHA MATRIZ DE ADJACENCIA
    // --CRIA UMA MATRIZ COM TODOS OS VERTICES, E BUSCA NO CONJUNTO DE LIGAÇÕES DE DETERMINADO VERTICE SE DETERMINADO PESO
    //   SE NÃO FOR ENCONTRADO É ATRIBUIDO 0 A POSIÇÃO SEM PESO
    // -- PRINTA A MATRIZ DE ADJACENCIA E A LISTA DE ADJACENCIA
    Grafo.prototype.desenharMatriz = function () {
        this.matriz = new Array();
        for(i=0;i < this.vertices.length; i++) {
            this.matriz[i] = new Array();
            for(j=0; j < this.vertices.length; j++){
                this.matriz[i][j] = 0;
                for(k=0; k< this.ligacao[this.vertices[i]].length; k++){
                    if(this.ligacao[this.vertices[i]][k][0] === this.vertices[j]) {
                        this.matriz[i][j] = this.ligacao[this.vertices[i]][k][1];
                    }
                }
            }
        }
        console.log('Matriz de Adjacencia: ');
        console.log(this.matriz);
        console.log('Lista de Adjacencia: ');
        console.log(this.ligacao);
    };

    // REMOVE ARESTA OU ARCO
    //--SE FOR DIRECIONADO - BUSCA O VERTICE DESTINO NO CONJUNTO DE LIGAÇÕES ORIGEM E EXCLUI
    //--SE NÃO FOR DIRECIONADO - BUSCA O VERTICE DESTINO NO CONJUNTO DE LIGAÇÕES ORIGEM E
    //                           O VERTICE ORIGEM NO CONJUNTO DE LIGAÇÕES DESTINO E EXCLUI
    Grafo.prototype.removerLigacao = function (origem,destino) {
        if(this.direcionado){
            for(i =0; i<this.ligacao[origem].length; i++ ) {
                if (this.ligacao[origem][i][0] === destino) {
                    this.ligacao[origem][i].pop();
                    this.ligacao[origem][i].pop();
                }
            }
        }else{
            for(i =0; i<this.ligacao[origem].length; i++ ) {
                if (this.ligacao[origem][i][0] === destino) {
                    for(j =0; j<this.ligacao[destino].length; j++){
                        if(this.ligacao[destino][j][0] === origem){
                                this.ligacao[origem][i].pop();
                                this.ligacao[origem][i].pop();
                                this.ligacao[destino][j].pop();
                                this.ligacao[destino][j].pop();
                        }
                    }
                }
            }
        }
    };

    //REMOVE VERTICE PELO NOME
    // FUNÇÃO NÃO ESTÁ FUNCIONANDO A PARTE DE REMOVER NA LISTA DE ADJACENCIA
    Grafo.prototype.removerVertice = function (vertice) {
        for(pos=0;pos<this.vertices.length;pos++) {
            this.removerLigacao(this.vertices[pos], vertice);
        }
        for(i=this.vertices.length-1;i--;){
            if(this.vertices[i] === vertice){
                this.vertices.splice(i,1);
                this.ligacao.splice(this.vertices[i],1);
            }
        }
    };

    Grafo.prototype.bfs = function (origem) {
      // em breve
    };
    Grafo.prototype.dfs = function (origem) {
        // em breve
    };
    Grafo.prototype.dijkstra = function (origem) {
        // em breve
    };
    Grafo.prototype.bfs = function (origem,destino) {
        // em breve
    };
    Grafo.prototype.dfs = function (origem,destino) {
        // em breve
    };
    Grafo.prototype.dijkstra = function (origem,destino) {
        // em breve
    };

    var grafo = new Grafo(false,true);
    grafo.addVertice('q1');
    grafo.addVertice('q2');
    grafo.addVertice('q3');
    grafo.addAresta('q1','q3',2);
    grafo.addAresta('q1','q2',4);
    //grafo.existeVertice('q4');
    //grafo.retornarLigacoes('q3');
    //grafo.removerLigacao('q3','q1');
    grafo.removerVertice('q1');
    grafo.desenharMatriz();

</script>